{% extends "base.html" %}

{% block content %}
<div class="tasks-header">
    <h2>Mes Tâches</h2>
    <a href="{{ url_for('add_task') }}" class="btn btn-primary">Nouvelle Tâche</a>
</div>

{% if tasks %}
<div class="tasks-grid">
    {% for task in tasks %}
    <div class="task-card {% if task['status'] == 'completed' %}completed{% endif %}">
        <div class="task-header">
            <h3>{{ task['title'] }}</h3>
            <span class="status-badge {{ task['status'] }}">
                {{ 'Terminée' if task['status'] == 'completed' else 'En attente' }}
            </span>
        </div>
        
        {% if task['description'] %}
        <p class="task-description">{{ task['description'] }}</p>
        {% endif %}
        
        <div class="task-meta">
            <small>Créée le: {{ task['created_at'][:10] }}</small>
        </div>
        
        <div class="task-actions">
            {% if task['status'] != 'completed' %}
            <a href="{{ url_for('complete_task', task_id=task['id']) }}" class="btn btn-success">Terminer</a>
            {% endif %}
            <a href="{{ url_for('edit_task', task_id=task['id']) }}" class="btn btn-secondary">Modifier</a>
            <a href="{{ url_for('delete_task', task_id=task['id']) }}" class="btn btn-danger" 
               onclick="return confirm('Êtes-vous sûr de vouloir supprimer cette tâche ?')">Supprimer</a>
        </div>
    </div>
    {% endfor %}
</div>
{% else %}
<div class="no-tasks">
    <p>Aucune tâche pour le moment.</p>
    <a href="{{ url_for('add_task') }}" class="btn btn-primary">Créer votre première tâche</a>
</div>
{% endif %}
{% endblock %}